
name: CI


on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]


jobs:

  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest


    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2


    # Runs a set of commands using the runners shell
    - name: BuildImage
      run: |
        mkdir -p /home/runner/gopath
        go get k8s.io/kubernetes || true
        go get sigs.k8s.io/kind
        cd ${GOPATH}/src/k8s.io/kubernetes && git checkout v1.19.0-rc.4
        kind build node-image --image=v1.19.0-rc.4
        make cert-manager-v1.19
      env:
       GOPATH: /home/runner/gopath
       GOBIN: /home/runner/gobin  

